@startuml empleados
Alta: Estado = "A"
Baja: Estado = "B"

top to bottom direction
[*] --> Alta: GestorEmpleados.crearEmpleado(empleado Empleados)
Alta --> [*]: GestorEmpleados.borrarEmpleado(empleado Empleados)
Baja --> [*]: GestorEmpleados.borrarEmpleado(empleado Empleados)
Alta --> Baja: Empleados.darBaja()
Baja --> Alta: Empleados.darAlta()

@enduml

@startuml tareas
Pendiente: Estado = "P"
EnProceso: Estado = "E"
Finalizada: Estado = "F"
Pausada: Estado = "S"
Cancelada: Estado = "C"
Verificada: Estado = "V"


[*] --> Pendiente: LineasProducto.crearTarea(tarea Tareas)
Pendiente --> [*]: LineasProducto.borrarTarea(tarea Tareas)
Cancelada --> [*]: LineasProducto.borrarTarea(tarea Tareas)
Pendiente --> EnProceso: Tareas.ejecutar()
EnProceso --> Cancelada: Tareas.cancelar()
EnProceso --> Finalizada: Tareas.finalizar()
EnProceso --> Pausada: Tareas.pausar()
Finalizada --> EnProceso: Tareas.reanudar()
Pausada --> EnProceso: Tareas.reanudar()
Pausada --> Cancelada: Tareas.cancelar()
Cancelada --> EnProceso: Tareas.reanudar()
Finalizada --> Cancelada: Tareas.cancelar()
Finalizada --> Verificada: Tareas.verificar()
Verificada --> EnProceso: Tareas.reanudar()

@enduml

@startuml lineasProducto
Pendiente: Estado = "P"
Cancelada: Estado = "C"
NoUtilizada: Estado = "N"
Utilizada: Estado = "U"
PendienteDeProduccion: Estado = "F " AND
PendienteDeProduccion:(this.\ntieneTareas() OR\n this.\ntodasTareasPendientes())
EnProduccion: Estado = "F" AND
EnProduccion: NOT this.\ntodasTareasPendientes()
Verificada: Estado = "V"
Reservada: Estado = "R"
Reservada: Venta tiene saldo
PendienteDeEntrega: Estado = "R"
PendienteDeEntrega: (IdRemito != null AND\n LineasVenta.dameVenta().obtenerSaldo() == 0 AND\n NOT this.dameRemito().estaCancelado()) OR\n NOT this.dameRemito().asociadoAVenta()
'Hicimos que estado = D para simplicidad en la busqueda.
Entregada: Estado = "D" 

top to bottom direction
[*] --> Pendiente: Presupuestos.\ncrearLineaPresupuesto(lp LineaPresupuesto)
[*] --> Pendiente: Ventas.\ncrearLineaVenta(lv LineasVenta)
[*] --> PendienteDeEntrega: Remitos.\ncrearLineaRemito(lr LineasRemito)
Pendiente --> [*]: Ventas.\nborrarLineaVenta(lv LineasVenta)
Pendiente --> [*]: Presupuestos.\nborrarLineaPresupuesto(lp LineaPresupuesto)
[*] --> PendienteDeProduccion: OrdenesProduccion.\ncrearLineaOrdenProduccion(lOP LineasOrdenProduccion)
PendienteDeProduccion --> [*]: OrdenesProduccion.\nborrarLineaOrdenProduccion(lOP LineasOrdenProduccion)
Pendiente --> Utilizada: GestorPresupuestos.\ntransformarPresupuestosEnVenta(presupuestos List<Presupuestos>)
Utilizada --> Pendiente: GestorVentas.\nborrarVenta(venta Ventas)
Pendiente --> NoUtilizada: GestorPresupuestos.\ntransformarPresupuestosEnVenta(presupuestos List<Presupuestos>)
NoUtilizada --> Pendiente: GestorVentas.\nborrarVenta(venta Ventas)
Utilizada --> NoUtilizada: Ventas.\nborrarLineaVenta(lv LineasVenta)
Pendiente --> Cancelada: LineasVenta.\ncancelar()
Pendiente --> PendienteDeProduccion: Ventas.\ngenerarOrdenProduccion(lv List<LineasVenta>)
Pendiente --> Reservada: Ventas.\ngenerarRemito(lv List<LineasVenta>)
Reservada --> Pendiente: Remitos.\ncancelar()
PendienteDeProduccion --> Cancelada: LineaOrdenProduccion.\ncancelar()
PendienteDeProduccion --> Cancelada: LineasVenta.\ncancelar()
PendienteDeProduccion --> Cancelada: LineasOrdenProduccion.\ncancelar()
PendienteDeProduccion --> EnProduccion: Tarea.\nejecutar()
EnProduccion --> Cancelada: LineaOrdenProduccion.\ncancelar()
EnProduccion --> Cancelada: LineasVenta.\ncancelar()
Reservada --> Cancelada: LineasVenta.\ncancelar()
EnProduccion --> Reservada: LineasProducto.\nverificar()
EnProduccion --> Verificada: LineasProducto.\nverificar()
Reservada --> PendienteDeEntrega: Ventas.\ncrearComprobante()
PendienteDeEntrega --> Entregada: Remitos.\nentregar()
PendienteDeEntrega --> [*]: Remitos.\nborrarLineaRemito(lr LineasRemito)
Entregada --> Cancelada: LineasVenta.\ncancelar()

@enduml

@startuml presupuestos

EnCreacion: Estado = "E"
Creado: Estado = "C"
Vendido: Estado = "V"
Expirado: Estado = "C" AND
Expirado: this.estaExpirado()

[*] --> EnCreacion: GestorPresupuestos.\ncrearPresupuesto\n(p Presupuestos)
EnCreacion --> Creado: this.\npasarACreado()
Creado --> Vendido: GestorPresupuestos.\ntransformarPresupuestosEnVenta\n(presupuestos List<Presupuestos>)
Creado --> Expirado
Vendido --> Creado: GestorVentas.\nborrarVenta\n(venta Ventas)
EnCreacion --> [*]: GestorPresupuestos.\nborrarPresupuesto\n(p Presupuestos)
Creado --> [*]: GestorPresupuestos.\nborrarPresupuesto\n(p Presupuestos)

@enduml

@startuml ventas
top to bottom direction

EnCreacion: Estado = "E"
EnRevision: Estado = "R"
Cancelada: (Estado = "C" OR\n Estado = "R") AND
Cancelada: this.todasLineasCanceladas()
Pendiente: Estado = "C"
Entregada: Estado = "C" AND
Entregada: this.todasLineasNoCanceladasEntregadas()

[*] --> EnCreacion: GestorVentas.\ncrearVenta\n(venta Ventas)
[*] --> EnCreacion: GestorPresupuestos.\ntransformarPresupuestosEnVenta\n(presupuestos List<Presupuestos>)
EnCreacion --> [*]: GestorPresupuestos.\nborrarPresupuesto\n(p Presupuestos)
EnCreacion -> EnRevision: this.\nchequearPrecios()
EnCreacion --> Pendiente: this.\nchequearPrecios()
EnRevision --> Cancelada
EnRevision --> Pendiente: this.\nrevisar()
Pendiente --> Cancelada
Pendiente --> Entregada

@enduml

@startuml ordenesProduccion
EnCreacion: Estado = "E"
Pendiente: Estado = "C"
Pendiente: Todas las lineas de producto no canceladas, no verificadas y no entregadas estan pendiente de produccion
EnProduccion: Estado = "C"
EnProduccion: Al menos una linea esta en produccion
Verificada: Estado = "C"
Verificada: Todas las lineas de producto no canceladas estan verificadas o entregadas
Cancelada: Estado = "C"
Cancelada: Todas las lineas de producto se encuentran canceladas

[*]--> EnCreacion: Desde Ventas
[*]--> EnCreacion: GestorOrdenesProduccion.crearOrdenProduccion(op OrdenesProduccion)
EnCreacion --> [*]: GestorOrdenesProduccion.borrarOrdenProduccion(op OrdenesProduccion)
EnCreacion -->Pendiente
Pendiente --> EnProduccion
Pendiente --> Cancelada
EnProduccion --> Verificada
@enduml

@startuml remitos
left to right direction

EnCreacion: Estado = "E"
Creado: Estado = "C"
Entregado: Estado = "C"
Entregado: FechaEntrega != null
Cancelado: Estado = "B"

[*] --> EnCreacion: GestorRemitos.crearRemito(remito Remitos)
[*] --> EnCreacion: Ventas.generarRemito()
EnCreacion --> Creado
Creado --> Entregado: Remitos.entregar()
Cancelado --> Creado: Remitos.descancelar()
Creado --> Cancelado: Remitos.cancelar()
EnCreacion --> [*]: GestorRemitos.borrarRemito(remito Remitos)
Creado --> [*]: GestorRemitos.borrarRemito(remito Remitos)

@enduml